<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart - Healthy Bites</title>
    <link rel="stylesheet" href="../static/css/landing.css" />
    <link rel="stylesheet" href="../static/css/meals.css" />
    <link rel="stylesheet" href="../static/css/cart.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      /* Inline styles to fix dropdown menu */
      .user-menu {
        position: relative;
      }

      .user-menu-btn {
        background: none;
        border: 1px solid transparent;
        color: #f5efd5;
        font-size: 1rem;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.2s ease;
      }

      .user-menu-btn:hover,
      .user-menu-btn:focus {
        background-color: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.3);
        outline: none;
      }

      .dropdown-menu {
        display: none;
        position: absolute;
        top: 100%;
        right: 0;
        background-color: white;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        min-width: 200px;
      }

      .dropdown-menu.active {
        display: block;
      }

      .dropdown-menu ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .dropdown-menu ul li {
        padding: 0;
        margin: 0;
      }

      .dropdown-menu ul li a {
        color: #0c3c30;
        padding: 10px 15px;
        display: block;
        text-decoration: none;
        transition: background-color 0.2s ease;
      }

      .dropdown-menu ul li a:hover {
        background-color: #f5f5f0;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <a href="index.html" class="navbar-brand">
        <img src="../static/images/logo.jpeg" alt="HealthyBites Logo" />
        <h1>Healthy Bites</h1>
      </a>
      <div class="navbar-auth">
        <div class="user-menu">
          <button
            class="user-menu-btn"
            id="userMenuBtn"
            onclick="toggleDropdown(event)"
          >
            My Account <i class="fas fa-chevron-down"></i>
          </button>
          <div class="dropdown-menu" id="userDropdown" style="display: none">
            <ul>
              <li>
                <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
              </li>
              <li>
                <a href="order-history.html"
                  ><i class="fas fa-history"></i> Order History</a
                >
              </li>
              <li>
                <a href="subscription.html"
                  ><i class="fas fa-star"></i> Subscription</a
                >
              </li>
              <li>
                <a href="products.html"><i class="fas fa-box"></i> Products</a>
              </li>
              <li>
                <a href="landing.html" class="logout-btn"
                  ><i class="fas fa-sign-out-alt"></i> Logout</a
                >
              </li>
            </ul>
          </div>
        </div>
        <a href="cart.html" class="cart-icon">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </a>
      </div>
    </nav>

    <main class="cart-container">
      <div class="cart-header">
        <h1>Your Shopping Cart</h1>
      </div>

      <div class="cart-content">
        <div class="cart-items">
          <!-- Cart items will be dynamically added here -->
          <!-- Empty cart message will show if no items -->
          <div class="empty-cart-message" style="display: none">
            <i class="fas fa-shopping-cart"></i>
            <h2>Your cart is empty</h2>
            <p>Browse our delicious meals to add items to your cart.</p>
            <div class="empty-cart-links">
              <a href="breakfast.html" class="meal-link">Breakfast</a>
              <a href="lunch.html" class="meal-link">Lunch</a>
              <a href="dinner.html" class="meal-link">Dinner</a>
            </div>
          </div>
        </div>

        <div class="cart-summary">
          <h2>Order Summary</h2>
          <div class="summary-row">
            <span>Subtotal</span>
            <span class="subtotal-price">$0.00</span>
          </div>
          <div class="summary-row">
            <span>Delivery Fee</span>
            <span class="delivery-fee">$3.99</span>
          </div>
          <div class="summary-row">
            <span>Tax</span>
            <span class="tax-price">$0.00</span>
          </div>
          <div class="summary-row total">
            <span>Total</span>
            <span class="total-price">$0.00</span>
          </div>

          <div class="promo-code">
            <input type="text" placeholder="Promo Code" id="promoCode" />
            <button id="applyPromo">Apply</button>
          </div>

          <button class="checkout-btn">Proceed to Checkout</button>
        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-logo">
            <img src="../static/images/logo.jpeg" alt="HealthyBites Logo" />
            <h3>Healthy Bites</h3>
          </div>
          <div class="footer-links">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="#">About Us</a></li>
              <li><a href="#">Our Menu</a></li>
              <li><a href="#">How It Works</a></li>
              <li><a href="#">FAQ</a></li>
            </ul>
          </div>
          <div class="footer-contact">
            <h4>Contact Us</h4>
            <p><i class="fas fa-envelope"></i> info@healthybites.com</p>
            <p><i class="fas fa-phone"></i> (123) 456-7890</p>
            <div class="social-icons">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 Healthy Bites. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script src="../static/js/menu.js" type="text/javascript"></script>
    <script src="../static/js/cart.js"></script>
    <script>
      function toggleDropdown(event) {
        event.preventDefault();
        event.stopPropagation();
        const dropdown = document.getElementById("userDropdown");
        const userMenuBtn = document.getElementById("userMenuBtn");

        if (dropdown) {
          const isActive = dropdown.style.display === "block";
          dropdown.style.display = isActive ? "none" : "block";

          // Toggle active class on button for styling
          if (userMenuBtn) {
            if (isActive) {
              userMenuBtn.classList.remove("active");
              userMenuBtn.style.borderColor = "transparent";
            } else {
              userMenuBtn.classList.add("active");
              userMenuBtn.style.borderColor = "rgba(255, 255, 255, 0.5)";
              userMenuBtn.style.backgroundColor = "rgba(255, 255, 255, 0.1)";
            }
          }
        }
      }

      // Close dropdown when clicking outside
      document.addEventListener("click", function (event) {
        const dropdown = document.getElementById("userDropdown");
        const userMenuBtn = document.getElementById("userMenuBtn");
        if (
          dropdown &&
          userMenuBtn &&
          !userMenuBtn.contains(event.target) &&
          !dropdown.contains(event.target)
        ) {
          dropdown.style.display = "none";
          // Remove active styling
          userMenuBtn.classList.remove("active");
          userMenuBtn.style.borderColor = "transparent";
          userMenuBtn.style.backgroundColor = "transparent";
        }
      });
    </script>
  </body>
</html>
